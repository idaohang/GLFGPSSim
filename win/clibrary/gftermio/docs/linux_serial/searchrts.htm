<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<BASE HREF="http://www.control.com/thread/1026231695"><table border=1 width=100%><tr><td><table border=1 bgcolor=#ffffff cellpadding=10 cellspacing=0 width=100% color=#ffffff><tr><td><font face="" color=black size=-1>This is <b><font color=#0039b6>G</font> <font color=#c41200>o</font> <font color=#f3c518>o</font> <font color=#0039b6>g</font> <font color=#30a72f>l</font> <font color=#c41200>e</font></b>'s <a href="http://www.google.com/intl/en/help/features.html#cached"><font color=blue>cache</font></a> of <a href="http://www.control.com/thread/1026231695"><font color=blue>http://www.control.com/thread/1026231695</font></a> as retrieved on Mar 10, 2008 15:07:12 GMT.<br>
<b><font color=#0039b6>G</font> <font color=#c41200>o</font> <font color=#f3c518>o</font> <font color=#0039b6>g</font> <font color=#30a72f>l</font> <font color=#c41200>e</font></b>'s cache is the snapshot that we took of the page as we crawled the web.<br>
The page may have changed since that time.  Click here for the <a href="http://www.control.com/thread/1026231695"><font color=blue>current page</font></a> without highlighting.<br>
This cached page may reference images which are no longer available. Click here for the <A HREF="http://64.233.167.104/search?q=cache:kzFECi6yHQwJ:www.control.com/thread/1026231695+linux+DTR+RTS+termios&hl=en&gl=us&strip=1"><font color=blue>cached text</font></a> only.<br>To link to or bookmark this page, use the following url: <code>http://www.google.com/search?q=cache:kzFECi6yHQwJ:www.control.com/thread/1026231695+linux+DTR+RTS+termios&amp;hl=en&amp;ct=clnk&amp;cd=3&amp;gl=us</code></font><br><br><center><font size=-2><i>Google is neither affiliated with the authors of this page nor responsible for its content.</i></font></center></td></tr>
<tr><td>
<table border=0 cellpadding=0 cellspacing=0><tr><td><font face="" color=black size=-1>These search terms have been highlighted:&nbsp;</font></td><td bgcolor=#ffff66><b><font face="" color=black size=-1>linux&nbsp;</font></b></td><td bgcolor=#a0ffff><b><font face="" color=black size=-1>dtr&nbsp;</font></b></td><td bgcolor=#99ff99><b><font face="" color=black size=-1>rts&nbsp;</font></b></td><td bgcolor=#ff9999><b><font face="" color=black size=-1>termios&nbsp;</font></b></td></tr></table>
</td></tr></table></td></tr></table>
<hr>
<div style="position:relative">
<HTML>
<HEAD>
<TITLE>RS232 (Serial port, C++, Linux, Disable RTS)</TITLE><meta name='description' content='The international forum for control engineers, system integrators, and industrial automation professionals.'><meta name='keywords' content='pid, modbus, opc, plc, scada, profibus, omron, wincc, siemens, dcs, devicenet, cimplicity, modicon, s7, rs232, s5, intouch, mitsubishi, visual basic, wonderware, citect, tutorial, mpi, bacnet, vb, rsview, elevator, labview, syswin, ethernet, pid control, rslinx, controllogix, deltav, ifix, abb, step5, linux, hmi, puffinscada, rs485, fanuc, melsec, df1, delta v, s7-200, servo, sms, pwm, java, dde, download, honeywell, intellution, cnc, ladder logic, factorylink, yokogawa, mscomm'><link rel='stylesheet'  media='screen' type='text/css' href='/css/cc.css' /><link rel="stylesheet" media="print" type="text/css" href="/css/print.css" />
</HEAD>
<BODY>
<div id='content'><div id='banner'><div id='adv_notice'></div><div class='bannerad'><a href='/ct.php?lnk=http%3A%2F%2Fwww.gasturbinecontrols.com&amp;id=250'><img src='/ads/gtcc-ad-728x90.gif' alt='advertisement' width='728' height='90' border='0'></a></div><div id='welcome'>Welcome to Control.com, the global online community of automation professionals.<div class='linkstext'><a href='/'>Home</a> | <a href='/showtopics.php'>View Control.com Topics</a> | <a href='/post.php'>Post a New Thread</a> | <a href='/guidelns.php'>Posting Guidelines</a> | <a href='/advertise.php'>Advertise with Us</a> | <a href='/mediakit.php'>Media Kit</a> | <a href='/alist.php'>Participate via Email</a> | <a href='http://www1.control.com/PLCArchive'>Visit the PLC Archive</a> | <a href='http://PuffinPLC.control.com/'>Check out the Puffin Projects</a> | <a href='http://www.cafepress.com/control_com/'>NEW: Control.com shirts, hats, etc.</a></div></div><h1 class='hide'>Control.com - Nerds in Control</h1></div><a id='cclogo' href='/'></a><div class='left_col'><div class='left_box'><div class='left_head'>Member Login</div><div class='left_body'><form action='/index.php' method='POST'>member <input type='text' name='username' size='15' maxlength='32'><br>passwd <input type='password' name='key' size='15' maxlength='32'><br><input type='checkbox' name='remember'> remember me on this computer.<br><input type='submit' value='login'></form><p style='text-align: center'><a href='http://www1.control.com/join_form'>- join now -</a></p></div></div><div class='left_box'><div class='left_head'>Search</div><div class='left_body'><form action='http://www1.control.com/postings_tool/displayFullTextSearch' method='GET'><input type='text' name='body' size='15' maxlength='50'><br><input type='submit' value='search'></form></div></div><div class='left_box'><div class='left_head'>Past &amp; Future Posts</div><div class='calendar'><table align=center><tr><tr><td class='calpointer'><a href='/date/1201842000'>&lt;</a></td><td colspan=5 class='calmonth'>March '08</td><td class='calpointer'><a href='/date/1207022400'>&gt;</a></td></tr><tr><td align=center ><a href='/date/1203829200'>24</a></td><td align=center ><a href='/date/1203915600'>25</a></td><td align=center ><a href='/date/1204002000'>26</a></td><td align=center ><a href='/date/1204088400'>27</a></td><td align=center ><a href='/date/1204174800'>28</a></td><td align=center ><a href='/date/1204261200'>29</a></td><td align=center ><a href='/date/1204347600'>1</a></td></tr><tr><td align=center ><a href='/date/1204434000'>2</a></td><td align=center ><a href='/date/1204520400'>3</a></td><td align=center ><a href='/date/1204606800'>4</a></td><td align=center ><a href='/date/1204693200'>5</a></td><td align=center ><a href='/date/1204779600'>6</a></td><td align=center ><a href='/date/1204866000'>7</a></td><td align=center ><a href='/date/1204952400'>8</a></td></tr><tr><td align=center ><a href='/date/1205038800'>9</a></td><td align=center ><a href='/date/1205125200'>10</a></td><td align=center ><a href='/date/1205211600'>11</a></td><td align=center ><a href='/date/1205298000'>12</a></td><td align=center ><a href='/date/1205384400'>13</a></td><td align=center ><a href='/date/1205470800'>14</a></td><td align=center ><a href='/date/1205557200'>15</a></td></tr><tr><td align=center ><a href='/date/1205643600'>16</a></td><td align=center ><a href='/date/1205730000'>17</a></td><td align=center ><a href='/date/1205816400'>18</a></td><td align=center ><a href='/date/1205902800'>19</a></td><td align=center ><a href='/date/1205989200'>20</a></td><td align=center ><a href='/date/1206075600'>21</a></td><td align=center ><a href='/date/1206162000'>22</a></td></tr><tr><td align=center ><a href='/date/1206248400'>23</a></td><td align=center ><a href='/date/1206334800'>24</a></td><td align=center ><a href='/date/1206421200'>25</a></td><td align=center ><a href='/date/1206507600'>26</a></td><td align=center ><a href='/date/1206594000'>27</a></td><td align=center ><a href='/date/1206680400'>28</a></td><td align=center ><a href='/date/1206766800'>29</a></td></tr><tr><td align=center ><a href='/date/1206853200'>30</a></td><td align=center ><a href='/date/1206939600'>31</a></td><td align=center ><a href='/date/1207026000'>1</a></td><td align=center ><a href='/date/1207112400'>2</a></td><td align=center ><a href='/date/1207198800'>3</a></td><td align=center ><a href='/date/1207285200'>4</a></td><td align=center ><a href='/date/1207371600'>5</a></td></tr><tr><td colspan=7 class='calmonth'>Click on a date</tr></table></div></div><div class='left_box'><div class='left_head'>Sponsored Communities</div><div class='left_body'><p><a href='http://modicon.control.com/'>Schneider Community</a></p><p><a href='http://modbus.control.com/user'>Modbus Community Users Forum</a></p><p><a href='http://modbus.control.com/dev'>Modbus Community Developers Forum</a></p></div></div><div class='left_box'><div class='left_head'>Neat Stuff</div><div class='left_body'><a href='http://www.cafepress.com/control_com/'><img src='/pix/cc_products.jpg' border=0></a><p>Visit <a href='http://www.cafepress.com/control_com/'>our shop</a> for <i>nerds in control</i> lifestyle products.</p></div></div><div class='left_box'><div class='left_head'>Cool stuff</div><div class='left_body'><form name='topic_select' action='/go.php' method='POST'>Select a topic of interest:<select name='xfer'><option value='/topic/58'>Applications</option><option value='/topic/59'>Business</option><option value='/topic/60'>Communications</option><option value='/topic/61'>Engineering</option><option value='/topic/62'>HMI</option><option value='/topic/63'>Information</option><option value='/topic/64'>Languages</option><option value='/topic/65'>The LinuxPLC</option><option value='/topic/66'>Motion Control</option><option value='/topic/67'>Networking</option><option value='/topic/68'>News</option><option value='/topic/69'>PCs</option><option value='/topic/70'>PLCs</option><option value='/topic/71'>Process Control</option><option value='/topic/72'>Sensors</option><option value='/topic/73'>Software</option><option value='/topic/147'>Open Control</option></select><br>...and press: <input type='submit' value='go'></form></div></div><div class='left_box'><div class='left_head'>Thermal Overload</div><div class='left_body'>The threads that wouldn't die...<br>- <a href='/thread.php?id=955571531'>PC reliability?</a><br>- <a href='/thread.php?id=942935547'>Windows, real time</a><br>- <a href='/thread.php?id=943391977'>PID loops</a><br>- <a href='/thread.php?id=941648158'>PCs vs. PLCs</a><br>- <a href='/thread.php?id=964789230'>Replacing people</a><br>- <a href='/thread.php?id=998923259'>MS 'monopoly'?</a><br>- <a href='/thread.php?id=1003371361'>Software quality</a><br>- <a href='/thread.php?id=980189718'>Where do we go from here?</a><br>- <a href='/thread.php?id=1026150562'>Why pay?</a><br></div></div><div class='left_box'><div class='left_head'>Fortune</div><div class='left_body'>A diplomat is a man who can convince his wife she'd look stout in a fur coat.<br></div></div><div class='left_box'><div class='left_head'>RSS Feed</div><div class='left_body'><a href='http://www.control.com/rss'><img src='/pix/feed-icon-12x12.gif' alt='RSS feed' height='12' width='12' border='0'></a> Use this link to get an RSS feed of the Control.com article flow, for private, non-commercial use only:<br><a href='http://www.control.com/rss'>www.control.com/rss</a></div></div><div class='left_box'><div class='left_head'>Select a Page Style</div><div class='left_body'>Select one of the following styles:<br>- <a href='/change_skin.php?style=blu_fu'>BluFu</a><br>- <a href='/change_skin.php?style=classic'>Classic</a><br>(cookies required)</div></div></div><div class='postings'><div class='post_box'><div class='subject'><div class='dept'>from the Serial Port Configuration department...</div>RS232 (Serial port, C++, <b style="color:black;background-color:#ffff66">Linux</b>, Disable <b style="color:black;background-color:#99ff99">RTS</b>)</div><div class='icon'><a href='/topic/58'><img src='/pix/apps-icn.jpg' height='50' width='50' border='0' alt='Applications topic'></a></div><div class='boombox_spacer'></div><div class='boombox'><a href='/ct.php?lnk=http%3A%2F%2Fwww.eplan.us%2F&amp;id=269'><img src='/ads/boombox4cc.gif' border='0' alt='advertisement'></a></div><div class='indent0'><div class='author_date'>Posted by Leandro on 17 February, 2007 - 12:00 am</div><div class='postbody'>I'm coding a little application in C++ that reads from Extech 380801 power meter. But to be able to that in need to do this configuration explained below.<br />
<br />
-------------------------------------------------<br />
Default RS-232 Communications Settings<br />
Baud Rate: 9600; Stop bit: 1; Data bits: 8; Parity: None<br />
NOTE: Software developers must ensure that <b style="color:black;background-color:#a0ffff">DTR</b> provides 10V (or higher) and <b style="color:black;background-color:#99ff99">RTS</b><br />
provides -10V (or lower). Voltage (10V, -10V) from <b style="color:black;background-color:#a0ffff">DTR</b> and <b style="color:black;background-color:#99ff99">RTS</b> is used to generate<br />
the RS-232 signal. <b style="color:black;background-color:#a0ffff">DTR</b> is usually enabled (10V) but <b style="color:black;background-color:#99ff99">RTS</b> must be disabled in order to<br />
provide -10V. To accomplish this in BASIC, add RS in the OPEN command:<br />
<br />
OPEN &quot;COM1: 9600, N, 8, 1, CS, DS, CD, RS&quot; as #1<br />
-------------------------------------------------<br />
<br />
Any idea how I can do this in C++? How can I disable the <b style="color:black;background-color:#99ff99">RTS</b>? I'm using the &quot;<b style="color:black;background-color:#ff9999">termios</b>.h&quot;<div class='more'><a href='/post.php?id=1026231695'>Reply to this post...</a></div></div></div><a name='1026231741'><hr></a><div class='indent1'><div class='author_date'>Posted by Curt Wuollet on 17 February, 2007 - 2:46 pm</div><div class='postbody'>There is a very good HOWTO on <b style="color:black;background-color:#ffff66">Linux</b> serial matters and the <b style="color:black;background-color:#ffff66">Linux</b> Programmers Guide helps too.  Both can be found at the <b style="color:black;background-color:#ffff66">Linux</b> Documentation Project at ibiblio.org or on hundreds of mirrors.  If that fails, post again and I'll dig up some source code. <br />
<br />
Regards <br />
cww <div class='more'><a href='/post.php?id=1026231741'>Reply to this post...</a></div></div></div><a name='1026231764'><hr></a><div class='indent1'><div class='author_date'>Posted by Michael Griffin on 18 February, 2007 - 2:39 pm</div><div class='postbody'>The following is from the message &quot;Re: ENGR: Help with Serial Com (Original in <br />
QBASIC)&quot; on the 11th of April last year. (http://www.control.com/thread/1026221083) It includes a small demo program <br />
in 'C' which I wrote to answer a question on the serial control lines. What <br />
follows is reproduced from that earlier message:<br />
<br />
&quot;the following 'C' code seems to work for setting and resetting the <b style="color:black;background-color:#99ff99">RTS</b> line. <br />
The demo code sets the <b style="color:black;background-color:#99ff99">RTS</b> pin, checks the pin status, waits for the user to <br />
press the return key, resets the <b style="color:black;background-color:#99ff99">RTS</b> pin, and checks the pin status again. It <br />
does not show how to read the serial port&quot;<br />
<br />
&quot;Most of what is below is just test code to demonstrate the pin being set and <br />
reset. The essential bits are opening the port, and the &quot;ioctl&quot; function call <br />
which sets the <b style="color:black;background-color:#99ff99">RTS</b> pin. You would also need to check the return value from <br />
the &quot;ioctl&quot; call to check for errors.&quot;<br />
<br />
/***********************************************************/<br />
#include &lt;<b style="color:black;background-color:#ff9999">termios</b>.h&gt;<br />
#include &lt;fcntl.h&gt;<br />
#include &lt;sys/ioctl.h&gt;<br />
#include &lt;stdio.h&gt;<br />
<br />
main() {<br />
int fd, sercmd, serstat;<br />
<br />
        sercmd = TIOCM_RTS;<br />
        fd = open(&quot;/dev/ttyS0&quot;, O_RDONLY);      // Open the serial port.<br />
<br />
        printf(&quot;Setting the <b style="color:black;background-color:#99ff99">RTS</b> pin.\n&quot;);<br />
        ioctl(fd, TIOCMBIS, &amp;sercmd);   // Set the <b style="color:black;background-color:#99ff99">RTS</b> pin.<br />
<br />
        // Read the <b style="color:black;background-color:#99ff99">RTS</b> pin status.<br />
        ioctl(fd, TIOCMGET, &amp;serstat);<br />
        if (serstat &amp; TIOCM_RTS)<br />
                printf(&quot;<b style="color:black;background-color:#99ff99">RTS</b> pin is set.\n&quot;);<br />
        else<br />
                printf(&quot;<b style="color:black;background-color:#99ff99">RTS</b> pin is reset.\n&quot;);<br />
<br />
        getchar();      // Wait for the return key before continuing.<br />
<br />
        printf(&quot;Resetting the <b style="color:black;background-color:#99ff99">RTS</b> pin.\n&quot;);<br />
        ioctl(fd, TIOCMBIC, &amp;sercmd);   // Reset the <b style="color:black;background-color:#99ff99">RTS</b> pin.<br />
<br />
        // Read the <b style="color:black;background-color:#99ff99">RTS</b> pin status.<br />
        ioctl(fd, TIOCMGET, &amp;serstat);<br />
        if (serstat &amp; TIOCM_RTS)<br />
                printf(&quot;<b style="color:black;background-color:#99ff99">RTS</b> pin is set.\n&quot;);<br />
        else<br />
                printf(&quot;<b style="color:black;background-color:#99ff99">RTS</b> pin is reset.\n&quot;);<br />
<br />
        close(fd);<br />
}<br />
<br />
/***********************************************************/<div class='more'><a href='/post.php?id=1026231764'>Reply to this post...</a></div></div></div><a name='1026231765'><hr></a><div class='indent1'><div class='author_date'>Posted by Anonymous on 18 February, 2007 - 2:40 pm</div><div class='postbody'>I just took a good look  and i dont think <b style="color:black;background-color:#ff9999">termios</b> lets you change bit values in registers for <b style="color:black;background-color:#a0ffff">DTR</b> and <b style="color:black;background-color:#99ff99">RTS</b>. <br />
<br />
Prob will have to write to the ports directly.<br />
<br />
#include &lt;asm/io.h&gt;<br />
#define serport 0x3f8   // for &quot;/dev/ttyS0&quot; <br />
<br />
  iopl(3);  // need this for access to ports	<br />
<br />
  outb( 0x02, serport+4); //modem control register<br />
<br />
<br />
then use <b style="color:black;background-color:#ff9999">termios</b><br />
<br />
<br />
<br />
/*MCR BIT 0:<br />
0 = force <b style="color:black;background-color:#a0ffff">DTR</b> (Data Terminal Ready) to high.<br />
1 = force <b style="color:black;background-color:#a0ffff">DTR</b> to low.<br />
<br />
MCR BIT 1:<br />
0 = force <b style="color:black;background-color:#99ff99">RTS</b> (Request to Send) to high.<br />
1 = force <b style="color:black;background-color:#99ff99">RTS</b> to low. */<br />
<br />
The serial port transmits a '1' as -3 to -25 volts and a '0' as +3 to +25 volts so you have to write a 1 to bit 1 and a 0 to bit 1   therefore the 0x02 written to serport+4<br />
<br />
2 problems   <br />
<br />
1  <b style="color:black;background-color:#ff9999">termios</b> might rewrite the MCR<br />
2  Your RS-232 Driver/Receiver  might not output 10 to -10.  verify the line voltage for <b style="color:black;background-color:#99ff99">RTS</b> and DTS<div class='more'><a href='/post.php?id=1026231765'>Reply to this post...</a></div></div></div><a name='1026242998'><hr></a><div class='indent2'><div class='author_date'>Posted by Nelson Castillo on 16 January, 2008 - 12:46 am</div><div class='postbody'><p>I could change them in <b style="color:black;background-color:#ffff66">Linux</b><br />
(you could save a syscall here. I think<br />
it is OK to save status).<br />
<pre><br />
void<br />
start_tx(int fd)<br />
{<br />
  int status;<br />
<br />
  ioctl(fd, TIOCMGET, &amp;status);<br />
  status |= TIOCM_RTS;<br />
<br />
  if (ioctl(fd, TIOCMSET, &amp;status))<br />
  {<br />
    perror(&quot;ioctl&quot;);<br />
    exit(1);<br />
  }<br />
}<br />
  <br />
void<br />
end_tx(int fd)<br />
{<br />
  int status;<br />
  ioctl(fd, TIOCMGET, &amp;status);<br />
  status &amp;= ~TIOCM_RTS;<br />
  ioctl(fd, TIOCMSET, &amp;status);<br />
} <br />
</pre><div class='more'><a href='/post.php?id=1026242998'>Reply to this post...</a></div></div></div><hr><div class='post_box'><div class='subject'><div class='dept'>From Control Engineering magazine...</div><a href='http://www.manufacturing.net/ctl'>Related articles from Control Engineering magazine</a></div><div class='ce_logo'><a href='http://www.manufacturing.net/ctl'><img src='/pix/ce_logo_s.jpg' height='30' width='83' border='0' alt='Control Engineering magazine'></a></div><div class='postbody'><div class='articles'><p><a href='http://www.controleng.com/article/CA6428691.html?rssid=123'>- Magnetic encoders help break 7-second motorcycle quarter-mile record</a></p><p><a href='http://www.controleng.com/article/CA6428693.html?rssid=123'>- Global manufacturing: Ireland invests in next-generation engineers</a></p><p><a href='http://www.controleng.com/article/CA6427960.html?rssid=123'>- Unification: Software optimizes all instruments</a></p><p><a href='http://www.controleng.com/article/CA6427957.html?rssid=123'>- Motor efficiency: NEMA expands energy saving program to 50 Hz</a></p><p><a href='http://www.controleng.com/article/CA6427955.html?rssid=123'>- New knowledge: 60 GB math object advances engineering</a></p><p><a href='http://www.controleng.com/article/CA6427952.html?rssid=123'>- Collaboration: ABB users discover new products, each other</a></p><p><a href='http://www.controleng.com/article/CA6427951.html?rssid=123'>- Draft standard: What?s in the April ?07 WirelessHART specification</a></p><p><a href='http://www.controleng.com/article/CA6427695.html?rssid=123'>- Asian expansion: Tyco strengthens flow control presence in China</a></p><p><a href='http://www.controleng.com/article/CA6427343.html?rssid=123'>- Tech Tips February 2005</a></p><p><a href='http://www.controleng.com/article/CA6427342.html?rssid=123'>- Tech Tips March 2005</a></p></div><div class='article_notices'>Above articles copyright 2006 Reed Business Information. Subject to its <a href='http://www.manufacturing.net/ctl/index.asp?layout=SiteInfoWebzineCTL&view=detailCTL&doc_id=131405'>Terms of Use.</a></div></div></div><hr></div><div class='post_box'><div id='notices'>Your use of this site is subject to the terms and conditions set forth under <a href='/about.php#legal'>Legal Notices</a> and the <a href='/about.php#privacy'>Privacy Policy</a>.  Please read those terms and conditions carefully.  Subject to the rights expressly reserved to others under Legal Notices, the content of this site and the compilation thereof is &copy; 1999-2008 <a href='http://www.ctc-control.com'>Control Technology Corporation</a>.  All rights reserved.</div><div id='credits'><p>Users of this site are benefiting from open source technologies, including <a href='http://www.php.net'>PHP</a>, <a href='http://www.postgresql.org'>PostgreSQL</a> and <a href='http://httpd.apache.org'>Apache</a>.  Be happy.</p></div></div></div><div class='right_col'><div class='skyscraper'><a href='/ct.php?lnk=http%3A%2F%2Fwww.ctc-control.com%2Fproducts%2FidxMotion.asp+&amp;id=86'><img src='/ads/oneController120x600.gif' alt='Advertisement' width='120' height='600' border='0'></a></div><div class='right_box'><div class='right_head'>Our Advertisers</div><div class='right_body'>Help keep our servers running...<br><a href='/advertisers.php'>Patronize our advertisers!</a></div></div></div></div></BODY>
</HTML>
